<div class="min-h-screen bg-gray-50 p-8 font-sans">
  <div class="mx-auto max-w-7xl">
    <h1 class="text-primary text-2xl font-bold">Search Cyber Helpers</h1>
    <p class="mt-2 text-base text-[#230448CC]">
      Find and connect with qualified cyber helpers to perform diagnostics for your organization.
    </p>

    <div class="mt-6">
      <label class="relative block">
        <input
          class="w-full rounded-full border border-gray-200 bg-white py-3 pl-14 pr-4 text-base placeholder:text-gray-400 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-indigo-600"
          type="search"
          placeholder="Search by name, skills, or language..."
          [value]="store.searchQuery()"
          (input)="onSearch($event)" />
        <svg
          class="absolute left-5 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2">
          <circle cx="11" cy="11" r="8" />
          <path d="m21 21-4.3-4.3" />
        </svg>
      </label>
    </div>

    <div class="mt-6 flex flex-wrap items-center gap-4 text-sm">
      <span class="text-primary font-semibold">Filter ({{ activeFilterCount() }}):</span>

      <div class="relative">
        <button
          class="text-primary rounded-xl border border-gray-300 bg-white px-4 py-2 text-sm shadow-sm transition-colors hover:bg-gray-100"
          (click)="toggleDropdown('availability')">
          Available Now
        </button>
        <div class="absolute z-10 mt-2 w-48 rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5">
          @if (isDropdownOpen('availability')) {
          <div class="p-2">
            <button
              class="w-full rounded-md px-3 py-2 text-left hover:bg-gray-100"
              (click)="selectFilter('availability', 'Available Now')">
              Available Now
            </button>
            <button
              class="w-full rounded-md px-3 py-2 text-left hover:bg-gray-100"
              (click)="selectFilter('availability', 'Anytime')">
              Anytime
            </button>
          </div>
          }
        </div>
      </div>

      <div class="relative">
        <button
          class="text-primary rounded-xl border border-gray-300 bg-white px-4 py-2 shadow-sm transition-colors hover:bg-gray-100"
          (click)="toggleDropdown('region')">
          Region/Location
        </button>
        @if (isDropdownOpen('region')) {
        <div class="absolute z-10 mt-2 w-64 rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5">
          <div class="p-4">
            <label class="relative mb-2 block">
              <input
                type="text"
                placeholder="Search..."
                class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-indigo-600"
                [(ngModel)]="regionSearch" />
            </label>
            <div class="max-h-48 overflow-y-auto">
              @for (region of filteredRegions(); track region) {
              <div class="flex items-center gap-2 rounded-md px-3 py-2 hover:bg-gray-100">
                <input
                  type="radio"
                  [id]="region"
                  [value]="region"
                  [checked]="store.selectedFilters()['region'] === region"
                  (change)="selectFilter('region', region)"
                  class="rounded-full text-indigo-600 focus:ring-indigo-500" />
                <label [for]="region" class="flex-grow text-sm">{{ region }}</label>
              </div>
              }
            </div>
            <div class="mt-4 flex justify-between">
              <button class="text-sm text-gray-500 hover:underline" (click)="resetRegionFilter()">Reset</button>
              <button class="text-sm font-medium text-indigo-600" (click)="closeDropdown()">Apply</button>
            </div>
          </div>
        </div>
        }
      </div>

      <!-- Other static filter buttons -->
      <button
        class="text-primary rounded-xl border border-gray-300 bg-white px-4 py-2 shadow-sm transition-colors hover:bg-gray-100">
        Languages Spoken
      </button>
      <button
        class="text-primary rounded-xl border border-gray-300 bg-white px-4 py-2 shadow-sm transition-colors hover:bg-gray-100">
        Expertise
      </button>
      <button
        class="text-primary rounded-xl border border-gray-300 bg-white px-4 py-2 shadow-sm transition-colors hover:bg-gray-100">
        Experience Level
      </button>
      <button
        class="text-primary rounded-xl border border-gray-300 bg-white px-4 py-2 shadow-sm transition-colors hover:bg-gray-100">
        Certification
      </button>
    </div>

    <div class="mt-8">
      <div class="mb-4 flex items-center justify-between">
        <h2 class="text-xl font-bold text-gray-800">200+ Cyber Helpers</h2>
        <div class="text-primary flex items-center space-x-2 text-sm">
          <span>Sort by:</span>
          <button class="flex items-center gap-1">
            Newest
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
        @for (helper of store.filteredHelpers(); track helper.id) {
        <app-helper-cyber-card [helper]="helper"></app-helper-cyber-card>
        }
      </div>
    </div>
  </div>
</div>
